/**
Regression.JS - Regression functions for javascript
http://tom-alexander.github.com/regression-js/

copyright(c) 2013 Tom Alexander
Licensed under the MIT license.
**/

(function(){"use strict";var e=function(e,t){var n=0,r=0,i=0,s=0,o=0,u=e.length-1,a=new Array(t);for(n=0;n<u;n++){s=n;for(r=n+1;r<u;r++){if(Math.abs(e[n][r])>Math.abs(e[n][s]))s=r}for(i=n;i<u+1;i++){o=e[i][n];e[i][n]=e[i][s];e[i][s]=o}for(r=n+1;r<u;r++){for(i=u;i>=n;i--){e[i][r]-=e[i][n]*e[n][r]/e[n][n]}}}for(r=u-1;r>=0;r--){o=0;for(i=r+1;i<u;i++)o+=e[i][r]*a[i];a[r]=(e[u][r]-o)/e[r][r]}return a};var t={linear:function(e){var t=[0,0,0,0,0],n=0,r=[];for(;n<e.length;n++){t[0]+=e[n][0];t[1]+=e[n][1];t[2]+=e[n][0]*e[n][0];t[3]+=e[n][0]*e[n][1];t[4]+=e[n][1]*e[n][1]}var i=(n*t[3]-t[0]*t[1])/(n*t[2]-t[0]*t[0]);var s=t[1]/n-i*t[0]/n;for(var o=0,u=e.length;o<u;o++){var a=[e[o][0],e[o][0]*i+s];r.push(a)}return{equation:[i,s],points:r}},exponential:function(e){var t=[0,0,0,0,0,0],n=0,r=[];for(a=e.length;n<a;n++){t[0]+=e[n][0];t[1]+=e[n][1];t[2]+=e[n][0]*e[n][0]*e[n][1];t[3]+=e[n][1]*Math.log(e[n][1]);t[4]+=e[n][0]*e[n][1]*Math.log(e[n][1]);t[5]+=e[n][0]*e[n][1]}var i=t[1]*t[2]-t[5]*t[5];var s=Math.pow(Math.E,(t[2]*t[3]-t[5]*t[4])/i);var o=(t[1]*t[4]-t[5]*t[3])/i;for(var u=0,a=e.length;u<a;u++){var f=[e[u][0],s*Math.pow(Math.E,o*e[u][0])];r.push(f)}return{equation:[s,o],points:r}},logarithmic:function(e){var t=[0,0,0,0],n=0,r=[];for(u=e.length;n<u;n++){t[0]+=Math.log(e[n][0]);t[1]+=e[n][1]*Math.log(e[n][0]);t[2]+=e[n][1];t[3]+=Math.pow(Math.log(e[n][0]),2)}var i=(n*t[1]-t[2]*t[0])/(n*t[3]-t[0]*t[0]);var s=(t[2]-i*t[0])/n;for(var o=0,u=e.length;o<u;o++){var a=[e[o][0],s+i*Math.log(e[o][0])];r.push(a)}return{equation:[s,i],points:r}},power:function(e){var t=[0,0,0,0],n=0,r=[];for(u=e.length;n<u;n++){t[0]+=Math.log(e[n][0]);t[1]+=Math.log(e[n][1])*Math.log(e[n][0]);t[2]+=Math.log(e[n][1]);t[3]+=Math.pow(Math.log(e[n][0]),2)}var i=(n*t[1]-t[2]*t[0])/(n*t[3]-t[0]*t[0]);var s=Math.pow(Math.E,(t[2]-i*t[0])/n);for(var o=0,u=e.length;o<u;o++){var a=[e[o][0],s*Math.pow(e[o][0],i)];r.push(a)}return{equation:[s,i],points:r}},polynomial:function(t,n){if(typeof n=="undefined"){n=2}var r=[],i=[],s=[],o=0,u=0,a=0,f=n+1;for(;a<f;a++){for(var l=0,c=t.length;l<c;l++){o+=Math.pow(t[l][0],a)*t[l][1]}r.push(o),o=0;var h=[];for(var p=0;p<f;p++){for(var l=0,c=t.length;l<c;l++){u+=Math.pow(t[l][0],a+p)}h.push(u),u=0}i.push(h)}i.push(r);var d=e(i,f);for(var a=0,c=t.length;a<c;a++){var v=0;for(var m=0;m<d.length;m++){v+=d[m]*Math.pow(t[a][0],m)}s.push([t[a][0],v])}return{equation:d,points:s}}};var n=function(e,n,r){if(typeof e=="string"){return t[e](n,r)}};if(typeof exports!=="undefined"){module.exports=n}else{window.regression=n}})()
